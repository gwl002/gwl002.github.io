(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[356],{3464:function(e,r,n){"use strict";n.r(r);var t=n(5893),o=n(6156),i=n(7329),s=n(4699),u=n(7294),c=n(6515),a=n(2401),f=n(3071),d=n(528),l=n(9653),p=n(2334),h=n(2817),w=n(7606),m=n(4975),x=n(8536),j=n(3741),y=n(3074),v=n(9127),b=n(2004),O=n(4978),g=n(3428),A=n(198),k=n(8894),R=n(9008);function P(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function E(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?P(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var _=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],N={ArrowUp:"ArrowDown",ArrowDown:"ArrowUp",ArrowRight:"ArrowLeft",ArrowLeft:"ArrowRight"},G=[300,200,100,80],D=function e(r,n){var t=Math.floor(Math.random()*r),o=Math.floor(Math.random()*r);return n.some((function(e){return e.x===t&&e.y===o}))?e(r,n):{x:t,y:o}},S=function(e){var r=e.food,n=e.itemWidth;return r?(0,t.jsx)("span",{className:"boardItem",style:{position:"absolute",width:n,height:n,left:n*r.x,top:n*r.y,backgroundColor:"green"},children:(0,t.jsx)("span",{})}):null},Z=(0,u.memo)((function(e){var r=e.data,n=e.itemWidth;return(0,t.jsx)(t.Fragment,{children:r.map((function(e,r){return(0,t.jsx)("span",{className:"boardItem",style:{position:"absolute",width:n,height:n,left:n*e.x,top:n*e.y,backgroundColor:"red"},children:(0,t.jsx)("span",{})},r)}))})})),M=function(e){return e.isGameOver?(0,t.jsx)("h1",{className:"center",children:"GAME OVER"}):null},U=(0,u.memo)((function(e){var r=e.winWidth,n=e.size,o=e.isGameOver,i=r/n,s=function(e){e.rowIndex;return(0,t.jsx)("div",{className:"row",children:Array(n).fill().map((function(e,r){return(0,t.jsx)("span",{className:"boardItem",style:{width:i,height:i},children:(0,t.jsx)("span",{})},r)}))})};return(0,t.jsxs)("div",{id:"board",children:[Array(n).fill().map((function(e,r){return(0,t.jsx)(s,{},r)})),(0,t.jsx)(M,{isGameOver:o})]})}));r.default=function(){var e=20,r=(0,k.Z)(),n=(0,s.Z)(r,2),o=n[0],P=n[1].width,M=P/e,I=(0,u.useState)({isGameOver:!1,score:0,snake:[],food:null,isPaused:!0}),T=I[0],W=I[1],C=function(){var r=new c.X(!1),n=(0,a.R)(document,"keydown").pipe((0,w.j)("key"),(0,m.h)((function(e){return _.includes(e)})),(0,x.O)("ArrowRight"),(0,j.x)()),t=(0,a.R)(document.getElementById("pauseORresume"),"click"),o=(0,a.R)(document,"keydown").pipe((0,w.j)("code"),(0,m.h)((function(e){return"Space"===e}))),u=(0,f.T)(t,o).pipe((0,x.O)(!0),(0,y.R)((function(e,r){return!e}),!1)),h=new c.X([]),k=h.pipe((0,y.R)((function(e,r){return e+1}),-1)),R=h.pipe((0,v.U)((function(r){return D(e,r)})),(0,b.d)(1)),P=k.pipe((0,m.h)((function(e){return e%5===0})),(0,v.U)((function(e){var r=Math.floor(e/5);return G[r=r>=3?3:r]})),(0,j.x)(),(0,O.w)((function(e){return(0,d.F)(e)}))),E=u.pipe((0,O.w)((function(e){return e?l.C:P})),(0,x.O)("init"),(0,g.M)(n,R),(0,y.R)((function(e,r){var n=(0,s.Z)(r,3),t=(n[0],n[1]),o=n[2];return N[t]===e[0]?[e[0],o]:[t,o]}),[]),(0,y.R)((function(e,n){var t=(0,s.Z)(n,2),o=t[0],u=t[1],c=e[0],a=c.x,f=c.y;switch(o){case"ArrowRight":a=a>=19?0:a+1;break;case"ArrowLeft":a=a<=0?19:a-1;break;case"ArrowUp":f=f<=0?19:f-1;break;case"ArrowDown":f=f>=19?0:f+1}return e.unshift({x:a,y:f}),u.x===a&&u.y===f?h.next(e):e.pop(),function(e){var r=e[0];return e.slice(1).some((function(e){return e.x===r.x&&e.y===r.y}))}(e)&&r.next(!0),(0,i.Z)(e)}),[{x:1,y:1}]));return(0,p.a)([E,u,R,k,r]).pipe((0,A.o)((function(e){var r=(0,s.Z)(e,5);r[0],r[1],r[2],r[3];return!r[4]}),!0))},L=function(){var e=(0,a.R)(document.getElementById("reset"),"click");return(0,f.T)((0,h.of)("startGame"),e).pipe((0,O.w)((function(e){return C()}))).subscribe((function(e){return function(e){var r=(0,s.Z)(e,5),n=r[0],t=r[1],o=r[2],i=r[3],u=r[4];W((function(e){return E(E({},e),{},{snake:n,isPaused:t,food:o,score:i,isGameOver:u})}))}(e)}))};return(0,u.useEffect)((function(){var e=L();return function(){e.unsubscribe()}}),[]),(0,t.jsxs)("div",{className:"container",ref:o,children:[(0,t.jsx)(R.default,{children:(0,t.jsx)("link",{rel:"stylesheet",href:"/styles/greedySnake.css"})}),(0,t.jsx)(U,{winWidth:P,size:e,isGameOver:T.isGameOver}),(0,t.jsx)(Z,{itemWidth:M,data:T.snake}),(0,t.jsx)(S,{itemWidth:M,food:T.food}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{id:"pauseORresume",children:T.isPaused?"START":"PAUSE"})}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{id:"reset",children:"reset"})}),(0,t.jsx)("span",{children:T.score})]})}},2754:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/greedySnake",function(){return n(3464)}])}},function(e){e.O(0,[774,74,888,179],(function(){return r=2754,e(e.s=r);var r}));var r=e.O();_N_E=r}]);