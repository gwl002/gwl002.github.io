(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[465],{96089:function(e,r,t){"use strict";t.r(r);var n=t(85893),o=t(96156),i=t(87329),u=t(34699),s=t(67294),c=t(86515),a=t(22401),f=t(9653),d=t(23071),h=t(77451),p=t(62334),l=t(32817),m=t(27606),w=t(94975),b=t(98536),x=t(53741),j=t(34978),v=t(83505),y=t(91320),O=t(29127),g=t(93074),A=t(12004),k=t(63428),R=t(198),E=t(38894),P=t(9008);function M(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?M(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var N=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],G={ArrowUp:"ArrowDown",ArrowDown:"ArrowUp",ArrowRight:"ArrowLeft",ArrowLeft:"ArrowRight"},D=[300,200,100,80],S=function e(r,t){var n=Math.floor(Math.random()*r),o=Math.floor(Math.random()*r);return t.some((function(e){return e.x===n&&e.y===o}))?e(r,t):{x:n,y:o}},U=function(e){var r=e.food,t=e.itemWidth;return r?(0,n.jsx)("span",{className:"boardItem",style:{position:"absolute",width:t,height:t,left:t*r.x,top:t*r.y,backgroundColor:"green"},children:(0,n.jsx)("span",{})}):null},Z=(0,s.memo)((function(e){var r=e.data,t=e.itemWidth;return(0,n.jsx)(n.Fragment,{children:r.map((function(e,r){return(0,n.jsx)("span",{className:"boardItem",style:{position:"absolute",width:t,height:t,left:t*e.x,top:t*e.y,backgroundColor:"red"},children:(0,n.jsx)("span",{})},r)}))})})),T=function(e){return e.isGameOver?(0,n.jsx)("h1",{className:"center",children:"GAME OVER"}):null},C=(0,s.memo)((function(e){var r=e.winWidth,t=e.size,o=e.isGameOver,i=r/t,u=function(e){e.rowIndex;return(0,n.jsx)("div",{className:"row",children:Array(t).fill().map((function(e,r){return(0,n.jsx)("span",{className:"boardItem",style:{width:i,height:i},children:(0,n.jsx)("span",{})},r)}))})};return(0,n.jsxs)("div",{id:"board",children:[Array(t).fill().map((function(e,r){return(0,n.jsx)(u,{},r)})),(0,n.jsx)(T,{isGameOver:o})]})}));r.default=function(){var e=20,r=(0,E.Z)(),t=(0,u.Z)(r,2),o=t[0],M=t[1].width,T=M/e,I=(0,s.useState)({isGameOver:!1,score:0,snake:[],food:null,isPaused:!0}),W=I[0],X=I[1],L=function(){var r=new c.X(!1),t=(0,a.R)(document,"keydown").pipe((0,m.j)("key"),(0,w.h)((function(e){return N.includes(e)})),(0,b.O)("ArrowRight"),(0,x.x)()),n="ontouchstart"in document.documentElement?(0,a.R)(document,"touchstart").pipe((0,j.w)((function(e){return(0,a.R)(document,"touchmove").pipe((0,v.R)((0,a.R)(document,"touchend")),(0,y.h)(1),(0,O.U)((function(r){var t=r.touches[0].pageX-e.touches[0].pageX,n=r.touches[0].pageY-e.touches[0].pageY;return t>0&&Math.abs(t)>Math.abs(n)?N[3]:t<0&&Math.abs(t)>Math.abs(n)?N[2]:n>0&&Math.abs(n)>Math.abs(t)?N[1]:N[0]})))}))):f.C,o=(0,d.T)(t,n),s=(0,a.R)(document.getElementById("pauseORresume"),"click"),l=(0,a.R)(document,"keydown").pipe((0,m.j)("code"),(0,w.h)((function(e){return"Space"===e}))),E=(0,d.T)(s,l).pipe((0,b.O)(!0),(0,g.R)((function(e,r){return!e}),!1)),P=new c.X([]),M=P.pipe((0,g.R)((function(e,r){return e+1}),-1)),_=P.pipe((0,O.U)((function(r){return S(e,r)})),(0,A.d)(1)),U=M.pipe((0,w.h)((function(e){return e%5===0})),(0,O.U)((function(e){var r=Math.floor(e/5);return D[r=r>=3?3:r]})),(0,x.x)(),(0,j.w)((function(e){return(0,h.F)(e)}))),Z=E.pipe((0,j.w)((function(e){return e?f.C:U})),(0,b.O)("init"),(0,k.M)(o,_),(0,g.R)((function(e,r){var t=(0,u.Z)(r,3),n=(t[0],t[1]),o=t[2];return G[n]===e[0]?[e[0],o]:[n,o]}),[]),(0,g.R)((function(e,t){var n=(0,u.Z)(t,2),o=n[0],s=n[1],c=e[0],a=c.x,f=c.y;switch(o){case"ArrowRight":a=a>=19?0:a+1;break;case"ArrowLeft":a=a<=0?19:a-1;break;case"ArrowUp":f=f<=0?19:f-1;break;case"ArrowDown":f=f>=19?0:f+1}return e.unshift({x:a,y:f}),s.x===a&&s.y===f?P.next(e):e.pop(),function(e){var r=e[0];return e.slice(1).some((function(e){return e.x===r.x&&e.y===r.y}))}(e)&&r.next(!0),(0,i.Z)(e)}),[{x:1,y:1}]));return(0,p.a)([Z,E,_,M,r]).pipe((0,R.o)((function(e){var r=(0,u.Z)(e,5);r[0],r[1],r[2],r[3];return!r[4]}),!0))},z=function(){var e=(0,a.R)(document.getElementById("reset"),"click");return(0,d.T)((0,l.of)("startGame"),e).pipe((0,j.w)((function(e){return L()}))).subscribe((function(e){return function(e){var r=(0,u.Z)(e,5),t=r[0],n=r[1],o=r[2],i=r[3],s=r[4];X((function(e){return _(_({},e),{},{snake:t,isPaused:n,food:o,score:i,isGameOver:s})}))}(e)}))};return(0,s.useEffect)((function(){var e=z();return function(){e.unsubscribe()}}),[]),(0,n.jsxs)("div",{className:"container",ref:o,children:[(0,n.jsx)(P.default,{children:(0,n.jsx)("link",{rel:"stylesheet",href:"/styles/greedySnake.css"})}),(0,n.jsx)(C,{winWidth:M,size:e,isGameOver:W.isGameOver}),(0,n.jsx)(Z,{itemWidth:T,data:W.snake}),(0,n.jsx)(U,{itemWidth:T,food:W.food}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{id:"pauseORresume",children:W.isPaused?"START":"PAUSE"})}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{id:"reset",children:"reset"})}),(0,n.jsx)("span",{children:W.score})]})}},84323:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/greedySnake",function(){return t(96089)}])}},function(e){e.O(0,[774,646,888,179],(function(){return r=84323,e(e.s=r);var r}));var r=e.O();_N_E=r}]);