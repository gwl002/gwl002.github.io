(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{4043:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/greedySnake",function(){return r(81307)}])},81307:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U});var s=r(5640),n=r(50148),a=r(6414),o=r(326),i=r(96992),l=r(36874),d=r(88024),c=r(39496),h=r(83991),u=r(97039),p=r(9120),m=r(7113),w=r(37986),x=r(83200),b=r(57699),j=r(40929),y=r(37460),f=r(12299),g=r(73913),A=r(45421),k=r(43418),v=r(28365),R=r(2565),E=r.n(R);let M=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],N={ArrowUp:"ArrowDown",ArrowDown:"ArrowUp",ArrowRight:"ArrowLeft",ArrowLeft:"ArrowRight"},_=[300,200,100,80],S=(e,t)=>{let r=Math.floor(Math.random()*e),s=Math.floor(Math.random()*e);return t.some(e=>e.x===r&&e.y===s)?S(e,t):{x:r,y:s}},O=e=>{let t=e[0];return e.slice(1).some(e=>e.x===t.x&&e.y===t.y)},G=()=>{let[e,{width:t}]=(0,v.A)(),r=t/20,[R,G]=(0,n.useState)({isGameOver:!1,score:0,snake:[],food:null,isPaused:!0}),I=()=>{let e=new a.t(!1),t=(0,o.R)(document,"keydown").pipe((0,u.E)("key"),(0,p.p)(e=>M.includes(e)),(0,m.Z)("ArrowRight"),(0,w.F)()),r="ontouchstart"in document.documentElement?(0,o.R)(document,"touchstart").pipe((0,x.n)(e=>(0,o.R)(document,"touchmove").pipe((0,b.Q)((0,o.R)(document,"touchend")),(0,j.o)(1),(0,y.T)(t=>{let r=t.touches[0].pageX-e.touches[0].pageX,s=t.touches[0].pageY-e.touches[0].pageY;return r>0&&Math.abs(r)>Math.abs(s)?M[3]:r<0&&Math.abs(r)>Math.abs(s)?M[2]:s>0&&Math.abs(s)>Math.abs(r)?M[1]:M[0]})))):i.t,s=(0,l.h)(t,r),n=(0,o.R)(document.getElementById("pauseORresume"),"click"),h=(0,o.R)(document,"keydown").pipe((0,u.E)("code"),(0,p.p)(e=>"Space"===e)),v=(0,l.h)(n,h).pipe((0,m.Z)(!0),(0,f.S)((e,t)=>!e,!1)),R=new a.t([]),E=R.pipe((0,f.S)((e,t)=>e+1,-1)),G=R.pipe((0,y.T)(e=>S(20,e)),(0,g.t)(1)),T=E.pipe((0,p.p)(e=>e%5==0),(0,y.T)(e=>{let t=Math.floor(e/5);return _[t=t>=3?3:t]}),(0,w.F)(),(0,x.n)(e=>(0,d.Y)(e))),C=v.pipe((0,x.n)(e=>e?i.t:T),(0,m.Z)("init"),(0,A.E)(s,G),(0,f.S)((e,t)=>{let[r,s,n]=t;return N[s]===e[0]?[e[0],n]:[s,n]},[]),(0,f.S)((t,r)=>{let[s,n]=r,a=t[0],o=a.x,i=a.y;switch(s){case"ArrowRight":o=o>=19?0:o+1;break;case"ArrowLeft":o=o<=0?19:o-1;break;case"ArrowUp":i=i<=0?19:i-1;break;case"ArrowDown":i=i>=19?0:i+1}return t.unshift({x:o,y:i}),n.x===o&&n.y===i?R.next(t):t.pop(),O(t)&&e.next(!0),[...t]},[{x:1,y:1}]));return(0,c.z)([C,v,G,E,e]).pipe((0,k.v)(e=>{let[t,r,s,n,a]=e;return!a},!0))},U=e=>{let[t,r,s,n,a]=e;G(e=>({...e,snake:t,isPaused:r,food:s,score:n,isGameOver:a}))},D=()=>{let e=(0,o.R)(document.getElementById("reset"),"click");return(0,l.h)((0,h.of)("startGame"),e).pipe((0,x.n)(e=>I())).subscribe(e=>U(e))};return(0,n.useEffect)(()=>{let e=D();return()=>{e.unsubscribe()}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E(),{children:(0,s.jsx)("link",{rel:"stylesheet",href:"/styles/greedySnake.css"})}),t>0?null:(0,s.jsx)(P,{}),(0,s.jsxs)("div",{className:"snakeGame",ref:e,style:{visibility:t>0?"visible":"hidden"},children:[(0,s.jsx)(L,{winWidth:t,size:20,isGameOver:R.isGameOver}),(0,s.jsx)(C,{itemWidth:r,data:R.snake}),(0,s.jsx)(T,{itemWidth:r,food:R.food}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{id:"pauseORresume",children:R.isPaused?"START":"PAUSE"})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{id:"reset",children:"reset"})}),(0,s.jsx)("span",{children:R.score})]})]})},T=e=>{let{food:t,itemWidth:r}=e;return t?(0,s.jsx)("span",{className:"boardItem",style:{position:"absolute",width:r,height:r,left:r*t.x,top:r*t.y,backgroundColor:"green"},children:(0,s.jsx)("span",{})}):null},C=(0,n.memo)(e=>{let{data:t,itemWidth:r}=e;return(0,s.jsx)(s.Fragment,{children:t.map((e,t)=>(0,s.jsx)("span",{className:"boardItem",style:{position:"absolute",width:r,height:r,left:r*e.x,top:r*e.y,backgroundColor:"red"},children:(0,s.jsx)("span",{})},t))})}),I=e=>{let{isGameOver:t}=e;return t?(0,s.jsx)("h1",{className:"center",children:"GAME OVER"}):null},L=(0,n.memo)(e=>{let{winWidth:t,size:r,isGameOver:n}=e,a=t/r,o=e=>{let{rowIndex:t}=e;return(0,s.jsx)("div",{className:"rowContainer",children:Array(r).fill().map((e,t)=>(0,s.jsx)("span",{className:"boardItem",style:{width:a,height:a},children:(0,s.jsx)("span",{})},t))})};return(0,s.jsxs)("div",{id:"board",children:[Array(r).fill().map((e,t)=>(0,s.jsx)(o,{},t)),(0,s.jsx)(I,{isGameOver:n})]})}),P=()=>(0,s.jsx)("div",{className:"loading",children:"Loading..."});G.layout="none";let U=G}},e=>{var t=t=>e(e.s=t);e.O(0,[711,636,593,792],()=>t(4043)),_N_E=e.O()}]);