(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[465],{96089:function(e,r,n){"use strict";n.r(r);var t=n(85893),o=n(96156),i=n(87329),s=n(34699),u=n(67294),a=n(86515),c=n(22401),d=n(9653),f=n(23071),l=n(77451),h=n(62334),p=n(32817),m=n(27606),w=n(94975),b=n(98536),x=n(53741),j=n(34978),v=n(83505),y=n(91320),O=n(29127),g=n(93074),A=n(12004),k=n(63428),R=n(198),E=n(38894),P=n(9008);function M(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function N(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?M(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var _=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],G={ArrowUp:"ArrowDown",ArrowDown:"ArrowUp",ArrowRight:"ArrowLeft",ArrowLeft:"ArrowRight"},D=[300,200,100,80],S=function e(r,n){var t=Math.floor(Math.random()*r),o=Math.floor(Math.random()*r);return n.some((function(e){return e.x===t&&e.y===o}))?e(r,n):{x:t,y:o}},U=function(){var e=20,r=(0,E.Z)(),n=(0,s.Z)(r,2),o=n[0],M=n[1].width,U=M/e,C=(0,u.useState)({isGameOver:!1,score:0,snake:[],food:null,isPaused:!0}),X=C[0],L=C[1],F=function(){var r=new a.X(!1),n=(0,c.R)(document,"keydown").pipe((0,m.j)("key"),(0,w.h)((function(e){return _.includes(e)})),(0,b.O)("ArrowRight"),(0,x.x)()),t="ontouchstart"in document.documentElement?(0,c.R)(document,"touchstart").pipe((0,j.w)((function(e){return(0,c.R)(document,"touchmove").pipe((0,v.R)((0,c.R)(document,"touchend")),(0,y.h)(1),(0,O.U)((function(r){var n=r.touches[0].pageX-e.touches[0].pageX,t=r.touches[0].pageY-e.touches[0].pageY;return n>0&&Math.abs(n)>Math.abs(t)?_[3]:n<0&&Math.abs(n)>Math.abs(t)?_[2]:t>0&&Math.abs(t)>Math.abs(n)?_[1]:_[0]})))}))):d.C,o=(0,f.T)(n,t),u=(0,c.R)(document.getElementById("pauseORresume"),"click"),p=(0,c.R)(document,"keydown").pipe((0,m.j)("code"),(0,w.h)((function(e){return"Space"===e}))),E=(0,f.T)(u,p).pipe((0,b.O)(!0),(0,g.R)((function(e,r){return!e}),!1)),P=new a.X([]),M=P.pipe((0,g.R)((function(e,r){return e+1}),-1)),N=P.pipe((0,O.U)((function(r){return S(e,r)})),(0,A.d)(1)),U=M.pipe((0,w.h)((function(e){return e%5===0})),(0,O.U)((function(e){var r=Math.floor(e/5);return D[r=r>=3?3:r]})),(0,x.x)(),(0,j.w)((function(e){return(0,l.F)(e)}))),Z=E.pipe((0,j.w)((function(e){return e?d.C:U})),(0,b.O)("init"),(0,k.M)(o,N),(0,g.R)((function(e,r){var n=(0,s.Z)(r,3),t=(n[0],n[1]),o=n[2];return G[t]===e[0]?[e[0],o]:[t,o]}),[]),(0,g.R)((function(e,n){var t=(0,s.Z)(n,2),o=t[0],u=t[1],a=e[0],c=a.x,d=a.y;switch(o){case"ArrowRight":c=c>=19?0:c+1;break;case"ArrowLeft":c=c<=0?19:c-1;break;case"ArrowUp":d=d<=0?19:d-1;break;case"ArrowDown":d=d>=19?0:d+1}return e.unshift({x:c,y:d}),u.x===c&&u.y===d?P.next(e):e.pop(),function(e){var r=e[0];return e.slice(1).some((function(e){return e.x===r.x&&e.y===r.y}))}(e)&&r.next(!0),(0,i.Z)(e)}),[{x:1,y:1}]));return(0,h.a)([Z,E,N,M,r]).pipe((0,R.o)((function(e){var r=(0,s.Z)(e,5);r[0],r[1],r[2],r[3];return!r[4]}),!0))},z=function(){var e=(0,c.R)(document.getElementById("reset"),"click");return(0,f.T)((0,p.of)("startGame"),e).pipe((0,j.w)((function(e){return F()}))).subscribe((function(e){return function(e){var r=(0,s.Z)(e,5),n=r[0],t=r[1],o=r[2],i=r[3],u=r[4];L((function(e){return N(N({},e),{},{snake:n,isPaused:t,food:o,score:i,isGameOver:u})}))}(e)}))};return(0,u.useEffect)((function(){var e=z();return function(){e.unsubscribe()}}),[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.default,{children:(0,t.jsx)("link",{rel:"stylesheet",href:"/styles/greedySnake.css"})}),M>0?null:(0,t.jsx)(W,{}),(0,t.jsxs)("div",{className:"container",ref:o,style:{visibility:M>0?"visible":"hidden"},children:[(0,t.jsx)(I,{winWidth:M,size:e,isGameOver:X.isGameOver}),(0,t.jsx)(T,{itemWidth:U,data:X.snake}),(0,t.jsx)(Z,{itemWidth:U,food:X.food}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{id:"pauseORresume",children:X.isPaused?"START":"PAUSE"})}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{id:"reset",children:"reset"})}),(0,t.jsx)("span",{children:X.score})]})]})},Z=function(e){var r=e.food,n=e.itemWidth;return r?(0,t.jsx)("span",{className:"boardItem",style:{position:"absolute",width:n,height:n,left:n*r.x,top:n*r.y,backgroundColor:"green"},children:(0,t.jsx)("span",{})}):null},T=(0,u.memo)((function(e){var r=e.data,n=e.itemWidth;return(0,t.jsx)(t.Fragment,{children:r.map((function(e,r){return(0,t.jsx)("span",{className:"boardItem",style:{position:"absolute",width:n,height:n,left:n*e.x,top:n*e.y,backgroundColor:"red"},children:(0,t.jsx)("span",{})},r)}))})})),C=function(e){return e.isGameOver?(0,t.jsx)("h1",{className:"center",children:"GAME OVER"}):null},I=(0,u.memo)((function(e){var r=e.winWidth,n=e.size,o=e.isGameOver,i=r/n,s=function(e){e.rowIndex;return(0,t.jsx)("div",{className:"row",children:Array(n).fill().map((function(e,r){return(0,t.jsx)("span",{className:"boardItem",style:{width:i,height:i},children:(0,t.jsx)("span",{})},r)}))})};return(0,t.jsxs)("div",{id:"board",children:[Array(n).fill().map((function(e,r){return(0,t.jsx)(s,{},r)})),(0,t.jsx)(C,{isGameOver:o})]})})),W=function(){return(0,t.jsx)("div",{className:"loading",children:"Loading..."})};U.layout="none",r.default=U},84323:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/greedySnake",function(){return n(96089)}])}},function(e){e.O(0,[408,774,888,179],(function(){return r=84323,e(e.s=r);var r}));var r=e.O();_N_E=r}]);