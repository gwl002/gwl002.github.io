<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3DGNKE718G"></script><meta name="description" content="记录工作学习兴趣爱好笔记" data-next-head=""/><meta property="og:description" content="记录工作学习兴趣爱好笔记" data-next-head=""/><meta http-equiv="x-ua-compatible" content="IE=edge; chrome=1" data-next-head=""/><meta name="application-name" content="gwl002&#x27;s blog" data-next-head=""/><title data-next-head="">暮天云光-react-native-webview加载第三方iframe</title><meta name="robots" content="index,follow" data-next-head=""/><meta property="og:title" content="暮天云光-react-native-webview加载第三方iframe" data-next-head=""/><meta name="keywords" content="" data-next-head=""/><link rel="shortcut icon" href="/favicon.ico?"/><link rel="preload" href="/_next/static/css/5546acd303353f69.css" as="style"/><link rel="preload" href="/_next/static/css/3f5b9e40b55cc87f.css" as="style"/><link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><script>window.__REACT_DEVTOOLS_GLOBAL_HOOK__.inject
                                =function(){}</script><script>
                                    window.dataLayer = window.dataLayer || [];
                                    function gtag(){dataLayer.push(arguments);}
                                    gtag('js', new Date());
                                    gtag('config', 'G-3DGNKE718G');
                                    </script><link rel="stylesheet" href="/_next/static/css/5546acd303353f69.css" data-n-g=""/><link rel="stylesheet" href="/_next/static/css/3f5b9e40b55cc87f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-6ffd07a3317375c1.js" defer=""></script><script src="/_next/static/chunks/framework-10ea8e61138a58ea.js" defer=""></script><script src="/_next/static/chunks/main-fcb13ce1ba122412.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c5879348fb3e202e.js" defer=""></script><script src="/_next/static/chunks/166-b07ac90dd3726f11.js" defer=""></script><script src="/_next/static/chunks/pages/article/%5Bid%5D-13bd4a108b3e972b.js" defer=""></script><script src="/_next/static/next-build/_buildManifest.js" defer=""></script><script src="/_next/static/next-build/_ssgManifest.js" defer=""></script></head><body><div id="__next"><nav class="navbar_navbar__DLtmj"><div class="navbar_containerFluid__mUw8m"><a class="navbar_navbarHeader__pD7He" href="/">暮天云光</a><ul class="navbar_nav__mA8Ko"><li><a href="/">HOME</a></li><li><a href="/about">关于</a></li><li><a href="/game">小游戏</a></li><li><a href="/archives">归档</a></li><li><a href="/tag">标签</a></li></ul><button class="navbar_navToggle__7O7ON" id="nav-toggle"><span class="navbar_iconBar__igEr6"></span><span class="navbar_iconBar__igEr6 navbar_mid__RikJj"></span><span class="navbar_iconBar__igEr6"></span></button></div></nav><header class="header_header__LUADv"><div class="container"><div class="column"><div class="content"><div class="header_articleHeading__TqTGo"><div class="header_tags__4xghr"><a href="/tag#javascript">javascript</a><a href="/tag#react-native">react-native</a></div><h1>react-native-webview加载第三方iframe</h1><span class="header_meta__L2LEO">Posted by gwl002 on <!-- -->2022-04-11</span></div></div></div></div></header><article><div class="container"><div class="column"><div class="content"><div class="article_article__HpMhr"><h3>1. 第三方iframe 遇到cross-origin问题</h3>
<p><a href="https://github.com/react-native-webview/react-native-webview/blob/master/docs/Reference.md#">设置baseUrl与iframe的domain相同</a></p>
<pre><div style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-react" style="white-space:pre;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>const ChatModal = ({ uuid, token, language, isLogin, dispatch, chatModal }) =&gt; {
</span>    const { shown } = chatModal;
<!-- -->    // const [isLoading, setIsLoading] = useState(false);
<!-- -->
<!-- -->    const closeModal = () =&gt; {
<!-- -->        dispatch({
<!-- -->            type: &#x27;modal/closeChatModal&#x27;,
<!-- -->        });
<!-- -->    };
<!-- -->
<!-- -->    const handleMessage = ({ nativeEvent }) =&gt; {
<!-- -->        const data = nativeEvent.data;
<!-- -->        if (data === &#x27;close&#x27;) {
<!-- -->            closeModal();
<!-- -->        }
<!-- -->    };
<!-- -->
<!-- -->    return (
<!-- -->        &lt;Modal animationType=&quot;fade&quot; transparent={false} visible={shown}&gt;
<!-- -->            &lt;SafeAreaView style={styles.container}&gt;
<!-- -->                &lt;WebView
<!-- -->                    source={{ html: html, baseUrl: &#x27;https://chat.sleekflow.io/&#x27; }}
<!-- -->                    style={styles.webview}
<!-- -->                    onMessage={handleMessage}
<!-- -->                /&gt;
<!-- -->            &lt;/SafeAreaView&gt;
<!-- -->        &lt;/Modal&gt;
<!-- -->    );
<!-- -->};</code></div></pre>
<h3>2.  通过postMessage 向rn发送event</h3>
<pre><div style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-javascript" style="white-space:pre;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>rootWindow</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access maybe-class-name">ReactNativeWebView</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">postMessage</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;close&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span> </span></code></div></pre>
<h3>3. <a href="https://github.com/react-native-webview/react-native-webview/blob/master/docs/Debugging.md#:~:text=Open%20Safari%20Preferences%20%2D%3E%20%22Advanced,you%20would%20on%20the%20web">react-native中调试js</a></h3>
<h3>3.1 ios中调试js</h3>
<ol>
<li>Open Safari Preferences -&gt; &quot;Advanced&quot; tab -&gt; enable checkbox &quot;Show Develop menu in menu bar&quot;</li>
<li>Start app with React Native WebView in iOS simulator or iOS device</li>
<li>Safari -&gt; Develop -&gt; [device name] -&gt; [app name] -&gt; [url - title]</li>
<li>You can now debug the WebView contents just as you would on the web</li>
</ol>
<h3>3.2 android中调试js</h3>
<ol>
<li>You will need to make the following change to MainApplication.java to enabled web contents debugging:</li>
</ol>
<pre><div style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-java" style="white-space:pre;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#c792ea;font-style:italic">import</span><span> </span><span class="token token">android</span><span class="token token" style="color:#89ddff">.</span><span class="token token">webkit</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#f2ff00">WebView</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>  </span><span class="token token annotation" style="color:#89ddff">@Override</span><span>
</span><span>  </span><span class="token token" style="color:#c792ea;font-style:italic">public</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">void</span><span> </span><span class="token token" style="color:#c792ea">onCreate</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">super</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">onCreate</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>	  </span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#89ddff">.</span><span>
</span><span>    </span><span class="token token" style="color:#f2ff00">WebView</span><span class="token token" style="color:#89ddff">.</span><span class="token token" style="color:#c792ea">setWebContentsDebuggingEnabled</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea">true</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>  </span><span class="token token" style="color:#89ddff">}</span></code></div></pre>
<ol start="2">
<li>Start app with React Native WebView in Android emulator or Android device</li>
<li>Open chrome://inspect/#devices on Chrome</li>
<li>Select your device on the left and select &quot;Inspect&quot; on the WebView contents you&#x27;d like to inspect</li>
<li>You can now debug the WebView contents just as you would on the web</li>
</ol>
<h3>4. html source code</h3>
<pre><div style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-html" style="white-space:pre;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#89ddff">&lt;!</span><span class="token token doctype-tag" style="color:#546e7a">DOCTYPE</span><span class="token token" style="color:#546e7a"> </span><span class="token token name" style="color:#546e7a">html</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">html</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">lang</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">en</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">head</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">meta</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">name</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">viewport</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">content</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">style</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#f07178">html</span><span class="token token style language-css" style="color:#89ddff">,</span><span class="token token style language-css" style="color:#f07178">body</span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">margin</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css" style="color:#fd9170">0</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">padding</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css" style="color:#fd9170">0</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#c792ea;font-weight:bold">#loading-overlay</span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">position</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css">absolute</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">width</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css" style="color:#fd9170">100</span><span class="token token style language-css" style="color:#f07178">%</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">height</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css" style="color:#fd9170">100</span><span class="token token style language-css" style="color:#f07178">vh</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">display</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> flex</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">align-items</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> center</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">justify-content</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> center</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">z-index</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css" style="color:#fd9170">2147483647</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">background-color</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css" style="color:#f2ff00">white</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">color</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> official</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">display</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> inline-block</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">position</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> relative</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">width</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">80</span><span class="token token style language-css" style="color:#f07178">px</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">height</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">80</span><span class="token token style language-css" style="color:#f07178">px</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css" style="color:#c792ea">scale</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">0.8</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform-origin</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">40</span><span class="token token style language-css" style="color:#f07178">px</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">40</span><span class="token token style language-css" style="color:#f07178">px</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> lds-spinner </span><span class="token token style language-css" style="color:#fd9170">1.2</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css"> linear infinite</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:after</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">content</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c3e88d">&quot; &quot;</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">display</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> block</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">position</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> absolute</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">top</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">3</span><span class="token token style language-css" style="color:#f07178">px</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">left</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">37</span><span class="token token style language-css" style="color:#f07178">px</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">width</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">6</span><span class="token token style language-css" style="color:#f07178">px</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">height</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">18</span><span class="token token style language-css" style="color:#f07178">px</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">border-radius</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">20</span><span class="token token style language-css" style="color:#f07178">%</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">background</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#f2ff00">blue</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">1</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">0</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">-1.1</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">2</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">30</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">-1</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">3</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">60</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">-0.9</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">4</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">90</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">-0.8</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">5</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">120</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">-0.7</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">6</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">150</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">-0.6</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">7</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">180</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">-0.5</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">8</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">210</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">-0.4</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">9</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">240</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">-0.3</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">10</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">270</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">-0.2</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">11</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">300</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">-0.1</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#ffcb6b">.lds-spinner</span><span class="token token style language-css" style="color:#f07178"> div</span><span class="token token style language-css" style="color:#c3e88d">:nth-child</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css n-th" style="color:#f07178">12</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">transform</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#c792ea">rotate</span><span class="token token style language-css" style="color:#89ddff">(</span><span class="token token style language-css" style="color:#fd9170">330</span><span class="token token style language-css" style="color:#f07178">deg</span><span class="token token style language-css" style="color:#89ddff">)</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#80cbc4">animation-delay</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">0</span><span class="token token style language-css" style="color:#f07178">s</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css rule" style="color:#c792ea">@keyframes</span><span class="token token style language-css" style="color:#c792ea"> lds-spinner</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#f07178">0%</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">opacity</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">1</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#f07178">100%</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#89ddff">{</span><span class="token token style language-css">
</span><span class="token token style language-css">                </span><span class="token token style language-css" style="color:#80cbc4">opacity</span><span class="token token style language-css" style="color:#89ddff">:</span><span class="token token style language-css"> </span><span class="token token style language-css" style="color:#fd9170">0</span><span class="token token style language-css" style="color:#89ddff">;</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">            </span><span class="token token style language-css" style="color:#89ddff">}</span><span class="token token style language-css">
</span><span class="token token style language-css">        </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">style</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">head</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">body</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">id</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">loading-overlay</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>            </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#f07178"> </span><span class="token token" style="color:#ffcb6b">class</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">lds-spinner</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>        </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">div</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">body</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">script</span><span class="token token" style="color:#f07178"> 
</span><span class="token token" style="color:#f07178">        </span><span class="token token" style="color:#ffcb6b">src</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">https://chat.sleekflow.io/embed_iframe.js</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#f07178"> 
</span><span class="token token" style="color:#f07178">        </span><span class="token token" style="color:#ffcb6b">data-id</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">travischatwidget</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">        </span><span class="token token" style="color:#ffcb6b">data-companyid</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">e1922105-8004-4724-97c7-859b7ff5dedf</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">        </span><span class="token token" style="color:#ffcb6b">type</span><span class="token token attr-equals" style="color:#89ddff">=</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#c3e88d">text/javascript</span><span class="token token" style="color:#89ddff">&quot;</span><span class="token token" style="color:#f07178">
</span><span class="token token" style="color:#f07178">    </span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">    </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">script</span><span class="token token" style="color:#89ddff">&gt;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">&lt;</span><span class="token token" style="color:#f07178">script</span><span class="token token" style="color:#89ddff">&gt;</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">        </span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">const</span><span class="token token script language-javascript"> rootWindow </span><span class="token token script language-javascript" style="color:#89ddff">=</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript dom" style="color:#f07178">window</span><span class="token token script language-javascript" style="color:#89ddff">;</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">        </span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">const</span><span class="token token script language-javascript"> loadingEle </span><span class="token token script language-javascript" style="color:#89ddff">=</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript dom" style="color:#f07178">document</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#c792ea">querySelector</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#c3e88d">&#x27;#loading-overlay&#x27;</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript" style="color:#546e7a">//loading</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">        </span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">function</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript" style="color:#c792ea">start</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">            </span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">function</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript" style="color:#c792ea">checkLoad</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript parameter">iframe</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                </span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">const</span><span class="token token script language-javascript"> iframeWindow </span><span class="token token script language-javascript" style="color:#89ddff">=</span><span class="token token script language-javascript"> iframe</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access">contentWindow</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access">window</span><span class="token token script language-javascript" style="color:#89ddff">;</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                </span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">const</span><span class="token token script language-javascript"> rootIframeEle </span><span class="token token script language-javascript" style="color:#89ddff">=</span><span class="token token script language-javascript"> iframeWindow</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access">document</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#c792ea">getElementById</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#c3e88d">&quot;travischatroot&quot;</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">;</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                </span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">const</span><span class="token token script language-javascript"> floatButton </span><span class="token token script language-javascript" style="color:#89ddff">=</span><span class="token token script language-javascript"> rootIframeEle</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#c792ea">querySelector</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#c3e88d">&quot;div&gt;button&quot;</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                </span><span class="token token script language-javascript control-flow" style="color:#c792ea;font-style:italic">if</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript">floatButton</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                    floatButton</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#c792ea">click</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">;</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                    </span><span class="token token script language-javascript" style="color:#c792ea">setTimeout</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript arrow" style="color:#89ddff">=&gt;</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                        loadingEle</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#c792ea">remove</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">;</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                        </span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">const</span><span class="token token script language-javascript"> closeButton </span><span class="token token script language-javascript" style="color:#89ddff">=</span><span class="token token script language-javascript"> rootIframeEle</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#c792ea">querySelector</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#c3e88d">&quot;#scrollConatiner&gt;div&gt;button&quot;</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                        </span><span class="token token script language-javascript control-flow" style="color:#c792ea;font-style:italic">if</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript">closeButton</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                            closeButton</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method-variable function-variable method property-access">onclick</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript" style="color:#89ddff">=</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">function</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript parameter">e</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                                e</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#c792ea">stopPropagation</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                                rootWindow</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript property-access maybe-class-name">ReactNativeWebView</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#c792ea">postMessage</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#c3e88d">&#x27;close&#x27;</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">;</span><span class="token token script language-javascript"> 
</span><span class="token token script language-javascript">                            </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                        </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                    </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript" style="color:#89ddff">,</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript" style="color:#fd9170">500</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">;</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript control-flow" style="color:#c792ea;font-style:italic">else</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                    </span><span class="token token script language-javascript" style="color:#c792ea">setTimeout</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">function</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                        </span><span class="token token script language-javascript" style="color:#c792ea">checkLoad</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript">iframe</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">;</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                    </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript" style="color:#89ddff">,</span><span class="token token script language-javascript" style="color:#fd9170">500</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">            </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">            </span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">const</span><span class="token token script language-javascript"> iframeEle </span><span class="token token script language-javascript" style="color:#89ddff">=</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript dom" style="color:#f07178">document</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#c792ea">querySelector</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#c3e88d">&#x27;iframe#travischatwidget&#x27;</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">            </span><span class="token token script language-javascript control-flow" style="color:#c792ea;font-style:italic">if</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript">iframeEle</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                iframeEle</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method property-access" style="color:#c792ea">addEventListener</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#c3e88d">&#x27;load&#x27;</span><span class="token token script language-javascript" style="color:#89ddff">,</span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">function</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                    </span><span class="token token script language-javascript" style="color:#c792ea">checkLoad</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript">iframeEle</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">            </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript control-flow" style="color:#c792ea;font-style:italic">else</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                </span><span class="token token script language-javascript" style="color:#c792ea">setTimeout</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">function</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                    </span><span class="token token script language-javascript" style="color:#c792ea">start</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">                </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript" style="color:#89ddff">,</span><span class="token token script language-javascript" style="color:#fd9170">500</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">            </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">        </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">        
</span><span class="token token script language-javascript">        </span><span class="token token script language-javascript dom" style="color:#f07178">window</span><span class="token token script language-javascript" style="color:#89ddff">.</span><span class="token token script language-javascript method-variable function-variable method property-access">onload</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript" style="color:#89ddff">=</span><span class="token token script language-javascript"> </span><span class="token token script language-javascript" style="color:#c792ea;font-style:italic">function</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">{</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">            </span><span class="token token script language-javascript" style="color:#c792ea">start</span><span class="token token script language-javascript" style="color:#89ddff">(</span><span class="token token script language-javascript" style="color:#89ddff">)</span><span class="token token script language-javascript" style="color:#89ddff">;</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">        </span><span class="token token script language-javascript" style="color:#89ddff">}</span><span class="token token script language-javascript">
</span><span class="token token script language-javascript">    </span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">script</span><span class="token token" style="color:#89ddff">&gt;</span><span> 
</span><span></span><span class="token token" style="color:#89ddff">&lt;/</span><span class="token token" style="color:#f07178">html</span><span class="token token" style="color:#89ddff">&gt;</span></code></div></pre><hr/></div><strong class="article_remark__Za7XM"><a href="https://github.com/gwl002/gwl002.github.io/issues/14">在github上参与本文讨论</a></strong><div class="home_sidebar__Oqqk_"><section><h5><a href="/tags">FEATURED TAGS</a></h5><ul><li class="home_tag__YZjS0"><a href="/tag#javascript">javascript</a></li><li class="home_tag__YZjS0"><a href="/tag#react-native">react-native</a></li></ul></section></div></div></div></div></article><footer class="footer_footer__YtHeK"><div class="footer_copywriting__6tSKT"><p>Copyright © 暮天云光 <!-- -->2025</p><p><span>Posted by  <a href="https://github.com/gwl002" target="_blank" rel="noopener noreferrer">gwl002</a></span><span> | 订阅本站<iframe style="margin-left:2px;margin-bottom:-5px" frameBorder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=gwl002&amp;repo=gwl002.github.io&amp;type=star&amp;count=false"></iframe></span></p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"e098078f0874d05907b3bbdac951bda1","title":"react-native-webview加载第三方iframe","body":"### 1. 第三方iframe 遇到cross-origin问题\r\n[设置baseUrl与iframe的domain相同](https://github.com/react-native-webview/react-native-webview/blob/master/docs/Reference.md#)\r\n```react\r\nconst ChatModal = ({ uuid, token, language, isLogin, dispatch, chatModal }) =\u003e {\r\n    const { shown } = chatModal;\r\n    // const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const closeModal = () =\u003e {\r\n        dispatch({\r\n            type: 'modal/closeChatModal',\r\n        });\r\n    };\r\n\r\n    const handleMessage = ({ nativeEvent }) =\u003e {\r\n        const data = nativeEvent.data;\r\n        if (data === 'close') {\r\n            closeModal();\r\n        }\r\n    };\r\n\r\n    return (\r\n        \u003cModal animationType=\"fade\" transparent={false} visible={shown}\u003e\r\n            \u003cSafeAreaView style={styles.container}\u003e\r\n                \u003cWebView\r\n                    source={{ html: html, baseUrl: 'https://chat.sleekflow.io/' }}\r\n                    style={styles.webview}\r\n                    onMessage={handleMessage}\r\n                /\u003e\r\n            \u003c/SafeAreaView\u003e\r\n        \u003c/Modal\u003e\r\n    );\r\n};\r\n```\r\n### 2.  通过postMessage 向rn发送event\r\n```javascript\r\nrootWindow.ReactNativeWebView.postMessage('close'); \r\n```\r\n\r\n### 3. [react-native中调试js](https://github.com/react-native-webview/react-native-webview/blob/master/docs/Debugging.md#:~:text=Open%20Safari%20Preferences%20%2D%3E%20%22Advanced,you%20would%20on%20the%20web)\r\n### 3.1 ios中调试js\r\n\r\n1. Open Safari Preferences -\u003e \"Advanced\" tab -\u003e enable checkbox \"Show Develop menu in menu bar\"\r\n2. Start app with React Native WebView in iOS simulator or iOS device\r\n3. Safari -\u003e Develop -\u003e [device name] -\u003e [app name] -\u003e [url - title]\r\n4. You can now debug the WebView contents just as you would on the web\r\n\r\n### 3.2 android中调试js\r\n\r\n1. You will need to make the following change to MainApplication.java to enabled web contents debugging: \r\n```java\r\nimport android.webkit.WebView;\r\n\r\n  @Override\r\n  public void onCreate() {\r\n    super.onCreate();\r\n\t  ...\r\n    WebView.setWebContentsDebuggingEnabled(true);\r\n  }\r\n```\r\n2. Start app with React Native WebView in Android emulator or Android device\r\n3. Open chrome://inspect/#devices on Chrome\r\n4. Select your device on the left and select \"Inspect\" on the WebView contents you'd like to inspect\r\n5. You can now debug the WebView contents just as you would on the web\r\n\r\n### 4. html source code\r\n```html\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"en\"\u003e\r\n    \u003chead\u003e\r\n        \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\"\u003e\r\n        \u003cstyle\u003e\r\n            html,body{\r\n                margin:0;\r\n                padding:0\r\n            }\r\n            #loading-overlay{\r\n                position:absolute;\r\n                width:100%;\r\n                height:100vh;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                z-index:2147483647;\r\n                background-color:white;\r\n            }\r\n            .lds-spinner {\r\n            color: official;\r\n            display: inline-block;\r\n            position: relative;\r\n            width: 80px;\r\n            height: 80px;\r\n            transform:scale(0.8)\r\n            }\r\n            .lds-spinner div {\r\n            transform-origin: 40px 40px;\r\n            animation: lds-spinner 1.2s linear infinite;\r\n            }\r\n            .lds-spinner div:after {\r\n            content: \" \";\r\n            display: block;\r\n            position: absolute;\r\n            top: 3px;\r\n            left: 37px;\r\n            width: 6px;\r\n            height: 18px;\r\n            border-radius: 20%;\r\n            background: blue;\r\n            }\r\n            .lds-spinner div:nth-child(1) {\r\n            transform: rotate(0deg);\r\n            animation-delay: -1.1s;\r\n            }\r\n            .lds-spinner div:nth-child(2) {\r\n            transform: rotate(30deg);\r\n            animation-delay: -1s;\r\n            }\r\n            .lds-spinner div:nth-child(3) {\r\n            transform: rotate(60deg);\r\n            animation-delay: -0.9s;\r\n            }\r\n            .lds-spinner div:nth-child(4) {\r\n            transform: rotate(90deg);\r\n            animation-delay: -0.8s;\r\n            }\r\n            .lds-spinner div:nth-child(5) {\r\n            transform: rotate(120deg);\r\n            animation-delay: -0.7s;\r\n            }\r\n            .lds-spinner div:nth-child(6) {\r\n            transform: rotate(150deg);\r\n            animation-delay: -0.6s;\r\n            }\r\n            .lds-spinner div:nth-child(7) {\r\n            transform: rotate(180deg);\r\n            animation-delay: -0.5s;\r\n            }\r\n            .lds-spinner div:nth-child(8) {\r\n            transform: rotate(210deg);\r\n            animation-delay: -0.4s;\r\n            }\r\n            .lds-spinner div:nth-child(9) {\r\n            transform: rotate(240deg);\r\n            animation-delay: -0.3s;\r\n            }\r\n            .lds-spinner div:nth-child(10) {\r\n            transform: rotate(270deg);\r\n            animation-delay: -0.2s;\r\n            }\r\n            .lds-spinner div:nth-child(11) {\r\n            transform: rotate(300deg);\r\n            animation-delay: -0.1s;\r\n            }\r\n            .lds-spinner div:nth-child(12) {\r\n            transform: rotate(330deg);\r\n            animation-delay: 0s;\r\n            }\r\n            @keyframes lds-spinner {\r\n            0% {\r\n                opacity: 1;\r\n            }\r\n            100% {\r\n                opacity: 0;\r\n            }\r\n            }\r\n        \u003c/style\u003e\r\n    \u003c/head\u003e\r\n    \u003cbody\u003e\r\n        \u003cdiv id=\"loading-overlay\"\u003e\r\n            \u003cdiv class=\"lds-spinner\"\u003e\u003cdiv\u003e\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003c/div\u003e\r\n        \u003c/div\u003e\r\n    \u003c/body\u003e\r\n    \u003cscript \r\n        src=\"https://chat.sleekflow.io/embed_iframe.js\" \r\n        data-id=\"travischatwidget\"\r\n        data-companyid=\"e1922105-8004-4724-97c7-859b7ff5dedf\"\r\n        type=\"text/javascript\"\r\n    \u003e\r\n    \u003c/script\u003e\r\n    \u003cscript\u003e\r\n        const rootWindow = window;\r\n        const loadingEle = document.querySelector('#loading-overlay') //loading\r\n\r\n        function start(){\r\n            function checkLoad(iframe){\r\n                const iframeWindow = iframe.contentWindow.window;\r\n                const rootIframeEle = iframeWindow.document.getElementById(\"travischatroot\");\r\n                const floatButton = rootIframeEle.querySelector(\"div\u003ebutton\")\r\n                if(floatButton){\r\n                    floatButton.click();\r\n                    setTimeout(() =\u003e {\r\n                        loadingEle.remove();\r\n                        const closeButton = rootIframeEle.querySelector(\"#scrollConatiner\u003ediv\u003ebutton\")\r\n                        if(closeButton){\r\n                            closeButton.onclick = function(e){\r\n                                e.stopPropagation()\r\n                                rootWindow.ReactNativeWebView.postMessage('close'); \r\n                            }\r\n                        }\r\n                    }, 500);\r\n                }else{\r\n                    setTimeout(function(){\r\n                        checkLoad(iframe);\r\n                    },500)\r\n                }\r\n            }\r\n\r\n            const iframeEle = document.querySelector('iframe#travischatwidget')\r\n            if(iframeEle){\r\n                iframeEle.addEventListener('load',function(){\r\n                    checkLoad(iframeEle)\r\n                })\r\n            }else{\r\n                setTimeout(function(){\r\n                    start()\r\n                },500)\r\n            }\r\n        }\r\n        \r\n        window.onload = function(){\r\n            start();\r\n        }\r\n    \u003c/script\u003e \r\n\u003c/html\u003e\r\n```\r\n\r\n","url":"https://github.com/gwl002/gwl002.github.io/issues/14","createdAt":"2022-04-11T14:40:39Z","tags":[{"name":"javascript","color":"1d76db"},{"name":"react-native","color":"5319e7"}],"headType":"article"},"__N_SSG":true},"page":"/article/[id]","query":{"id":"e098078f0874d05907b3bbdac951bda1"},"buildId":"next-build","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>