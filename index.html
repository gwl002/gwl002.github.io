<!DOCTYPE html><html><head><link rel="shortcut icon" href="/favicon.ico?"/><link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/38e5a5b4776088319b61.css" as="style"/><link rel="stylesheet" href="/_next/static/css/38e5a5b4776088319b61.css" data-n-g=""/><link rel="preload" href="/_next/static/css/04e4ce03328b15d48b9a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/04e4ce03328b15d48b9a.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-af8d060cb140570bcfb2.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-c179ed8d0295df0a6019.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-c5e6ccd6db559e171f21.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-80bd99636630a50e76c6.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/index-fa6bed50cde0cc61855d.js" as="script"/></head><body><div id="__next"><nav class="navbar_navbar__1EgTS"><div class="navbar_containerFluid__3lQQx"><a href="/" class="navbar_navbarHeader__25-ag">æš®å¤©äº‘å…‰</a><ul class="navbar_nav__6ovd1"><li><a href="/">HOME</a></li><li><a href="/about">å…³äº</a></li><li><a href="/game">å°æ¸¸æˆ</a></li><li><a href="/archives">å½’æ¡£</a></li><li><a href="/tag">æ ‡ç­¾</a></li></ul><button class="navbar_navToggle__1WISG" id="nav-toggle"><span class="navbar_iconBar__10AK6"></span><span class="navbar_iconBar__10AK6 navbar_mid__E-C7Y"></span><span class="navbar_iconBar__10AK6"></span></button></div></nav><header class="header_header__2q1wF"><div class="container"><div class="column"><div class="content"><div class="header_siteHeading__23a2I"><h1>æš®å¤©äº‘å…‰</h1><span>å·¥ä½œç»éªŒã€å­¦ä¹ ç¬”è®°ã€å…´è¶£çˆ±å¥½</span></div></div></div></div></header><div class="container"><div class="content"><div class="row"><ul class="home_postList__MrPmU"><li class="home_postItem__3EIS-"><a href="/article/next-blog"><h2 class="home_postTitle__14YYV">next-blog</h2><h3></h3><div class="home_postContentPreview__3w-Ya">æµ‹è¯•å†™ä¸€ä¸ªnext-blog</div></a><p class="home_postMeta__37mFu">Posted by gwl002 on <!-- -->2021-06-11</p></li><hr/><li class="home_postItem__3EIS-"><a href="/article/rxjs%E5%AE%9E%E7%8E%B0%E8%B4%AA%E5%90%83%E8%9B%87%E5%B0%8F%E6%B8%B8%E6%88%8F"><h2 class="home_postTitle__14YYV">rxjså®ç°è´ªåƒè›‡å°æ¸¸æˆ</h2><h3></h3><div class="home_postContentPreview__3w-Ya">æœ¬æ–‡ä»‹ç»åŸºäºrxjså†™ä¸€ä¸ªç»å…¸çš„æ¸¸æˆè´ªåƒè›‡çš„è¿‡ç¨‹ã€‚</div></a><p class="home_postMeta__37mFu">Posted by gwl002 on <!-- -->2021-06-10</p></li><hr/><li class="home_postItem__3EIS-"><a href="/article/%E4%BD%BF%E7%94%A8javascript%E7%94%9F%E6%88%90pdf%E6%96%87%E4%BB%B6"><h2 class="home_postTitle__14YYV">ä½¿ç”¨javascriptç”Ÿæˆpdfæ–‡ä»¶</h2><h3></h3><div class="home_postContentPreview__3w-Ya">ä¸€ä¸ªæ•™è‚²ç½‘ç«™é¡¹ç›®æœ‰ä¸ªéœ€æ±‚ï¼Œéœ€è¦åœ¨å­¦å‘˜å®ŒæˆæŸäº›æµ‹è¯•åç”Ÿæˆè¯ä¹¦å¹¶ä¸‹è½½ã€‚æœ¬ä»¥ä¸ºåº”è¯¥æ˜¯è°ƒç”¨åç«¯çš„æ¥å£ç”Ÿæˆï¼Œä½†æ˜¯åç«¯ä¹Ÿè¯´ä¸å¤ªæ‡‚ï¼Œåªå¥½å‰ç«¯æ¥ç ”ç©¶ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚googleä¸€ä¸‹åå‘ç°æ¯”è¾ƒé è°±çš„æœ‰2ç§æ–¹æ¡ˆã€‚
ä½¿ç”¨jspdfå’Œhtml2canvasè¿™2ä¸ªåº“åœ¨å‰ç«¯å®ç°
ä½¿ç”¨nodejsé€šè¿‡puppeteer åœ¨åç«¯ç”Ÿæˆ
ä¸‹é¢åˆ†åˆ«è¯´è¯´è¿™2ç§æ–¹æ³•çš„å®ç°ã€‚
ä½¿ç”¨jspdfç”Ÿæˆpdf
é¦–å…ˆç¼–å†™pdfæ¨¡ç‰ˆçš„html(æˆ‘è¿™é‡Œæ˜¯ç”¨reactå†™çš„)ã€‚
`jsx
`
å› ä¸ºè¿™ä¸ªæ¨¡ç‰ˆåªæ˜¯ç”¨æ¥ç”Ÿæˆpdfï¼Œå¹¶ä¸ç”¨æ˜¾ç¤ºï¼Œæ‰€ä»¥é€šè¿‡csså°†å…¶æ”¾åœ¨è§†é‡ä¹‹å¤–ã€‚
`css
.cert {
    width: 870px;
    height: 615px;
    position: absolute;
    // background:transparent url($imgData) ;
    // background-size: ......</div></a><p class="home_postMeta__37mFu">Posted by gwl002 on <!-- -->2021-06-06</p></li><hr/></ul><div class="home_sidebar__31WDI"><section><h5><a href="/tags">FEATURED TAGS</a></h5><ul><li class="home_tag__bnOVo"><a href="/tag#javascript">javascript</a></li><li class="home_tag__bnOVo"><a href="/tag#react">react</a></li><li class="home_tag__bnOVo"><a href="/tag#css">css</a></li><li class="home_tag__bnOVo"><a href="/tag#html">html</a></li><li class="home_tag__bnOVo"><a href="/tag#vue">vue</a></li></ul></section></div></div></div></div><footer class="footer_footer__1cByA"><div><div class="footer_copywriting__2a9K7"><p>Copyright Â© æš®å¤©äº‘å…‰ <!-- -->2021</p><p><span>Posted by Â <a href="https://github.com/gwl002" target="_blank" rel="noopener">gwl002</a></span><span>Â |Â è®¢é˜…æœ¬ç«™<iframe style="margin-left:2px;margin-bottom:-5px" frameBorder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=gwl002&amp;repo=gwl002.github.io&amp;type=star&amp;count=false"></iframe></span></p></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"list":[{"title":"next-blog","body":"æµ‹è¯•å†™ä¸€ä¸ªnext-blog","url":"https://github.com/gwl002/gwl002.github.io/issues/4","createdAt":"2021-06-11T02:42:50Z","tags":["react"]},{"title":"rxjså®ç°è´ªåƒè›‡å°æ¸¸æˆ","body":"æœ¬æ–‡ä»‹ç»åŸºäºrxjså†™ä¸€ä¸ªç»å…¸çš„æ¸¸æˆè´ªåƒè›‡çš„è¿‡ç¨‹ã€‚","url":"https://github.com/gwl002/gwl002.github.io/issues/3","createdAt":"2021-06-10T16:15:20Z","tags":["react"]},{"title":"ä½¿ç”¨javascriptç”Ÿæˆpdfæ–‡ä»¶","body":"ä¸€ä¸ªæ•™è‚²ç½‘ç«™é¡¹ç›®æœ‰ä¸ªéœ€æ±‚ï¼Œéœ€è¦åœ¨å­¦å‘˜å®ŒæˆæŸäº›æµ‹è¯•åç”Ÿæˆè¯ä¹¦å¹¶ä¸‹è½½ã€‚æœ¬ä»¥ä¸ºåº”è¯¥æ˜¯è°ƒç”¨åç«¯çš„æ¥å£ç”Ÿæˆï¼Œä½†æ˜¯åç«¯ä¹Ÿè¯´ä¸å¤ªæ‡‚ï¼Œåªå¥½å‰ç«¯æ¥ç ”ç©¶ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚googleä¸€ä¸‹åå‘ç°æ¯”è¾ƒé è°±çš„æœ‰2ç§æ–¹æ¡ˆã€‚\r\n\r\n- ä½¿ç”¨jspdfå’Œhtml2canvasè¿™2ä¸ªåº“åœ¨å‰ç«¯å®ç°\r\n- ä½¿ç”¨nodejsé€šè¿‡puppeteer åœ¨åç«¯ç”Ÿæˆ\r\n\r\nä¸‹é¢åˆ†åˆ«è¯´è¯´è¿™2ç§æ–¹æ³•çš„å®ç°ã€‚\r\n\r\n# ä½¿ç”¨jspdfç”Ÿæˆpdf #\r\n\r\né¦–å…ˆç¼–å†™pdfæ¨¡ç‰ˆçš„html(æˆ‘è¿™é‡Œæ˜¯ç”¨reactå†™çš„)ã€‚\r\n```jsx\r\n\u003cCert\r\n    chineseName={chineseName}\r\n    englishName={englishName}\r\n    unitInfo={unitInfo}\r\n/\u003e\r\n```\r\nå› ä¸ºè¿™ä¸ªæ¨¡ç‰ˆåªæ˜¯ç”¨æ¥ç”Ÿæˆpdfï¼Œå¹¶ä¸ç”¨æ˜¾ç¤ºï¼Œæ‰€ä»¥é€šè¿‡csså°†å…¶æ”¾åœ¨è§†é‡ä¹‹å¤–ã€‚\r\n```css\r\n.cert {\r\n    width: 870px;\r\n    height: 615px;\r\n    position: absolute;\r\n    // background:transparent url($imgData) ;\r\n    // background-size: 100%;\r\n    // top:-30px;\r\n    left: 5000px;\r\n    visibility: hidden;\r\n    z-index: 99;\r\n}\r\n```\r\næ ¸å¿ƒä»£ç ,å…ˆç”¨html2canvaså°†htmlè½¬æˆcanvasï¼Œå†å°†canvasè½¬æˆimage dataurlï¼Œå†å°†imageå†™å…¥pdfä¸­ã€‚\r\n```jsx\r\nconst savePDF = async () =\u003e {\r\n    setIsLoading(true);\r\n    try {\r\n        const jsPDF = (await import(\"jspdf\")).default; //å¼•å…¥jspdf\r\n        const html2canvas = (await import(\"html2canvas\")).default; //å¼•å…¥html2canvas\r\n        let canvas = await html2canvas(document.querySelector(\"#cert\"), {\r\n            scrollY: 0,  //ä¸è®¾ç½®æ­¤å±æ€§ æ»šåŠ¨è§†å›¾æ—¶ä¼šå¯¼è‡´ä¸‹è½½çš„pdfæœ‰éƒ¨åˆ†ä¸æ˜¾ç¤º\r\n            onclone: (clonedDoc) =\u003e {\r\n                clonedDoc.getElementById(\"cert\").style.visibility = 'visible'; //å°†pdfæ¨¡ç‰ˆè®¾ä¸ºå¯è§\r\n            }\r\n        })\r\n        var imgData = canvas.toDataURL('image/png');\r\n        var doc = new jsPDF('l', 'mm', \"a4\", true); \r\n        var width = doc.internal.pageSize.getWidth();\r\n        var height = doc.internal.pageSize.getHeight();\r\n        doc.addImage(imgData, 'PNG', 0, 0, width, height, \"\", \"FAST\"); //FAST æ˜¯å¦å‹ç¼©\r\n        // let pdf = doc.output('blob');\r\n        // let form = new FormData();\r\n        doc.output('save', 'Certificate.pdf');\r\n    } catch (err) {\r\n        console.log(err);\r\n    } finally {\r\n        setIsLoading(false)\r\n    }\r\n}\r\n```\r\nè¿™å°±å¤§åŠŸå‘Šæˆäº†ï¼Ÿé«˜å…´çš„å¤ªæ—©ï¼ğŸ˜­ğŸ˜­ğŸ˜­é—®é¢˜æ€»æ˜¯å±‚å‡ºä¸ç©·çš„å¤šã€‚åœ¨ç”¨æ­¤æ–¹æ³•ä¸­ä¸€å…±é‡åˆ°ä¸‰ä¸ªè¾ƒå¤§çš„é—®é¢˜ã€‚\r\n\r\n1. åˆæ­¥å®ç°åŠŸèƒ½æäº¤åï¼Œä¸€å¤©qaçªç„¶å’Œæˆ‘è¯´æ€ä¹ˆç”Ÿæˆçš„pdfä¸ŠåŠéƒ¨åˆ†æ˜¯ç©ºç™½çš„ã€‚æ²¡åŠæ³•ï¼Œæ‰¾æ‰¾æ‰¾ã€‚é€šè¿‡googleï¼Œå‘ç°æ˜¯html2canvasæ—¶ä¼šæ ¹æ®ç”¨æˆ·æ»šåŠ¨çš„ä½ç½®æ¥è®¡ç®—çš„ï¼Œè®¾ç½®scrollY: 0è§£å†³ã€‚\r\n2. ä¹‹å‰åœ¨devåœºä¸­æµ‹è¯•å¹¶æ²¡æœ‰å‘ç°é—®é¢˜ï¼Œä½†æ˜¯ä¸Šäº†uatåå‘ç°pdfä¸­å›¾ç‰‡æ²¡åŠ è½½ã€‚æœ€åå‘ç°æ˜¯å› ä¸ºuatåœºå›¾ç‰‡å…¨éƒ¨æ”¾åœ¨äº†cdnçš„ç¼˜æ•…ï¼Œpdfä¸ä¼šåŠ è½½éåŒæºç«™çš„å›¾ç‰‡ä¹Ÿå°±è·¨åŸŸï¼Œè®¾ç½®useCORSä¹Ÿæ²¡æœ‰ç”¨ã€‚æœ€åç›´æ¥æŠŠpdfä¸­ç”¨åˆ°çš„å›¾ç‰‡æ¢æˆbase64è§£å†³ã€‚\r\n3. ä¸åŒçš„æµè§ˆå™¨å’Œè®¾å¤‡ç”Ÿæˆçš„pdfæ–‡ä»¶sizeä¸åŒã€‚æœ‰çš„åªæœ‰å‡ M,æœ‰çš„åå‡ Mã€‚è¿™ä¸ªåº”è¯¥å’Œè®¾å¤‡çš„åˆ†è¾¨ç‡æœ‰å…³ã€‚è®¾ç½®äº†æ˜¯å¦å‹ç¼©ï¼Œå¯ä»¥è°ƒèŠ‚pdfçš„sizeï¼Œä½†æ˜¯è¿˜æ˜¯æ— æ³•ç»Ÿä¸€ç”Ÿæˆçš„pdfçš„sizeã€‚\r\n\r\n# ä½¿ç”¨puppeteeråç«¯ç”Ÿæˆpdf #\r\n\r\n\r\n","url":"https://github.com/gwl002/gwl002.github.io/issues/2","createdAt":"2021-06-06T14:54:27Z","tags":["css"]}],"tags":[{"name":"javascript","color":"1d76db"},{"name":"react","color":"8E26BB"},{"name":"css","color":"F49416"},{"name":"html","color":"000B87"},{"name":"vue","color":"f9d0c4"}],"title":"æš®å¤©äº‘å…‰","subTitle":"å·¥ä½œç»éªŒã€å­¦ä¹ ç¬”è®°ã€å…´è¶£çˆ±å¥½"},"__N_SSG":true},"page":"/","query":{},"buildId":"next-build","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-7b08e4c67f4f1b892f4b.js"></script><script src="/_next/static/chunks/webpack-af8d060cb140570bcfb2.js" async=""></script><script src="/_next/static/chunks/framework-c179ed8d0295df0a6019.js" async=""></script><script src="/_next/static/chunks/main-c5e6ccd6db559e171f21.js" async=""></script><script src="/_next/static/chunks/pages/_app-80bd99636630a50e76c6.js" async=""></script><script src="/_next/static/chunks/pages/index-fa6bed50cde0cc61855d.js" async=""></script><script src="/_next/static/next-build/_buildManifest.js" async=""></script><script src="/_next/static/next-build/_ssgManifest.js" async=""></script></body></html>